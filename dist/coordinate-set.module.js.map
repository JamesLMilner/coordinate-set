{"version":3,"file":"coordinate-set.module.js","sources":["../src/coordinate-set.ts"],"sourcesContent":["export class CoordinateSet {\n  constructor(arrOrCoordSet?: [number, number][] | CoordinateSet) {\n    this._map = new Map();\n\n    if (Array.isArray(arrOrCoordSet)) {\n      arrOrCoordSet.forEach((c) => {\n        this._validateCoordinate(c);\n        this._map.set(this._getKey(c), c);\n      });\n      this._size = arrOrCoordSet.length;\n    } else if (arrOrCoordSet instanceof CoordinateSet) {\n      arrOrCoordSet.forEach((c) => {\n        this._map.set(this._getKey(c), c);\n      });\n      this._size = arrOrCoordSet.size;\n    } else {\n      this._size = 0;\n    }\n  }\n\n  private _size: number;\n  private _map: Map<string, [number, number]>;\n\n  private _getKey(coordinates: [number, number]) {\n    return `${coordinates[0]},${coordinates[1]}`;\n  }\n\n  private _validateCoordinate([lng, lat]: [number, number]) {\n    if (\n      !(typeof lng === \"number\" && !isNaN(lng) && lng >= -180 && lng <= 180)\n    ) {\n      throw new Error(\"Longitude must be valid\");\n    } else if (\n      !(typeof lat === \"number\" && !isNaN(lat) && lat >= -90 && lat <= 90)\n    ) {\n      throw new Error(\"Latitude must be valid\");\n    }\n  }\n\n  *[Symbol.iterator]() {\n    for (let entry of this._map.entries()) {\n      yield [entry[1], entry[1]];\n    }\n  }\n\n  entries() {\n    return this[Symbol.iterator]();\n  }\n\n  forEach(\n    callback: (\n      value: [number, number],\n      index: number,\n      set: CoordinateSet\n    ) => void\n  ): void {\n    [...this.entries()].forEach((entryValue, entryIndex) => {\n      callback(entryValue[0], entryIndex, this);\n    });\n  }\n\n  // O(1)\n  get size(): number {\n    return this._size;\n  }\n\n  // Ignore setting the size property publically\n  set size(value: number) {}\n\n  has(coordinate: [number, number]) {\n    this._validateCoordinate(coordinate);\n    return Boolean(this._map.get(this._getKey(coordinate)));\n  }\n\n  add(coordinate: [number, number]) {\n    this._validateCoordinate(coordinate);\n    const key = this._getKey(coordinate);\n    if (this._map.get(key)) {\n      return;\n    }\n    this._size++;\n    this._map.set(key, coordinate);\n    return this;\n  }\n\n  delete(coordinate: [number, number]): boolean {\n    this._validateCoordinate(coordinate);\n    const key = this._getKey(coordinate);\n    if (!this._map.get(key)) {\n      return false;\n    }\n    this._size--;\n    return this._map.delete(key);\n  }\n\n  clear() {\n    this._map = new Map();\n    this._size = 0;\n  }\n}\n"],"names":["Symbol","iterator","CoordinateSet","arrOrCoordSet","_this","this","_size","_map","Map","Array","isArray","forEach","c","_validateCoordinate","set","_getKey","length","size","_proto","prototype","coordinates","_ref","lng","lat","isNaN","Error","_Symbol$iterator","regeneratorRuntime","mark","_callee","_iterator","_step","entry","wrap","_context","prev","next","_createForOfIteratorHelperLoose","entries","callback","_this2","concat","entryValue","entryIndex","has","coordinate","Boolean","get","add","key","clear","value"],"mappings":"8zBAuCIA,OAAOC,SAvCEC,IAAAA,eAAb,WACE,SAAYC,EAAAA,GAAkD,IAAAC,EAAAC,KAAAA,KAmBtDC,WACAC,EAAAA,KAAAA,UAnBN,EAAAF,KAAKE,KAAO,IAAIC,IAEZC,MAAMC,QAAQP,IAChBA,EAAcQ,QAAQ,SAACC,GACrBR,EAAKS,oBAAoBD,GACzBR,EAAKG,KAAKO,IAAIV,EAAKW,QAAQH,GAAIA,KAEjCP,KAAKC,MAAQH,EAAca,QAClBb,aAAyBD,GAClCC,EAAcQ,QAAQ,SAACC,GACrBR,EAAKG,KAAKO,IAAIV,EAAKW,QAAQH,GAAIA,KAEjCP,KAAKC,MAAQH,EAAcc,MAE3BZ,KAAKC,MAAQ,EAhBnB,QAAAY,EAAAhB,EAAAiB,UAAA,OAAAD,EAuBUH,QAAA,SAAQK,GACd,OAAUA,EAAY,GAAMA,IAAAA,EAAY,IAxB5CF,EA2BUL,oBAAA,SAAgDQ,GAAA,IAA3BC,EAA2BD,EAAA,GAAtBE,EAAsBF,EAAA,GACtD,KACmB,iBAARC,IAAqBE,MAAMF,IAAQA,IAAQ,KAAOA,GAAO,KAElE,MAAM,IAAIG,MAAM,2BAEhB,KAAiB,iBAARF,IAAqBC,MAAMD,IAAQA,IAAQ,IAAMA,GAAO,IAEjE,MAAUE,IAAAA,MAAM,2BAnCtBP,EAAAQ,gBAAAC,mBAAAC,KAuCE,SACoBC,IAAA,IAAAC,EAAAC,EAAAC,EAAA,OAAAL,mBAAAM,KAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAAN,EAAAO,EAAAhC,KAAKE,KAAK+B,WAAnBN,KAAAA,EAAAA,IAAAA,EAAAA,KAAAA,KAAAA,CAAAA,EAAAA,KAAAA,EAAAA,MACP,OADOA,mBACD,CAACA,EAAM,GAAIA,EAAM,IAF3B,mEAMAM,EAAAA,QAAA,WACE,YAAYtC,OAAOC,aA9CvBiB,EAiDEP,QAAA,SACE4B,GAMA,IAAAC,EAAAnC,KAAA,GAAAoC,OAAIpC,KAAKiC,WAAW3B,QAAQ,SAAC+B,EAAYC,GACvCJ,EAASG,EAAW,GAAIC,EAAYH,MAzD1CtB,EAqEE0B,IAAA,SAAIC,GAEF,OADAxC,KAAKQ,oBAAoBgC,GAClBC,QAAQzC,KAAKE,KAAKwC,IAAI1C,KAAKU,QAAQ8B,QAG5CG,IAAA,SAAIH,GACFxC,KAAKQ,oBAAoBgC,GACzB,IAAMI,EAAM5C,KAAKU,QAAQ8B,GACzB,IAAIxC,KAAKE,KAAKwC,IAAIE,GAKlB,OAFA5C,KAAKC,QACLD,KAAKE,KAAKO,IAAImC,EAAKJ,GACZxC,MAGTa,EAAA,OAAA,SAAO2B,GACLxC,KAAKQ,oBAAoBgC,GACzB,IAAMI,EAAM5C,KAAKU,QAAQ8B,GACzB,QAAKxC,KAAKE,KAAKwC,IAAIE,KAGnB5C,KAAKC,QACOC,KAAAA,YAAY0C,KA5F5B/B,EA+FEgC,MAAA,WACE7C,KAAKE,KAAO,IAAIC,IAChBH,KAAKC,MAAQ,2BAnCf,WACE,OAAOD,KAAKC,WAId,SAAS6C,gPAnEXjD,EAAA"}